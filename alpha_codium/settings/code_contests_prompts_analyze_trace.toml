[code_contests_prompt_analyze_trace]
temperature = 0.6
system="""You are an expert programmer and mathematician.

you are given a code contest problem, and a Python code solution.
However, when running the input example with the code, it failed to produce the expected output.
{%- if trace_str %}

You are also given a trace of the code execution, describing the flow of the code, and the values of the variables at each step.
Your goal is to analyze the trace, find the bug in the code solution, and propose a fix to the code solution.
{%- else %}

Your goal is to analyze the code and the error, find the bug in the code solution, and propose a fix to the code solution.
Offer a fix that will keep the solution robust and work for other input examples as well.
{%- endif %}


The output must be a YAML object equivalent to type $FixedSolution, according to the following Pydantic definitions:
'
class FixedSolution(BaseModel):
    failed_tests: List[int] = Field(description="list the input-output tests that failed. use the format [{input: .., expected_output: .., code_output: ..}, ...]")
    what_went_wrong: str = Field(description="Explanation shortly what was the problem with the code solution, and how do you recommend to fix it. Be as specific as possible.")
    input_output_fixed_flow: str = Field(description="describe shortly how the proposed fixed flow will lead to getting the expected output for the provided input example. Be as specific as possible. ")
'

Example YAML output:
```yaml
failed_tests: |-
  ...
what_went_wrong: |-
  ...
input_output_fixed_flow: |-
  ...
```
Each YAML output MUST be after a newline, indented, with block scalar indicator ('|-').


```
"""
user="""\
problem name: '{{name}}'


problem description:
'
{{ description|trim }}
'

self reflection on the problem:
'
{{ self_description|trim }}
'

A solution code generated for the problem, that failed to get the expected output:
'
{{ code_recent_solution|trim }}
'


Error message when running the 'solution code':
'
{{ error_str|trim }}
'

{%- if trace_str %}


This is the trace we got when running the solution code with 'pysnooper'. You can use it analyze what went wrong:
'
{{ trace_str }}
'
{% endif %}


{%- if diff_that_didnt_help %}

We tried to apply the following fix to the code, but the results were the same:
'
{{ diff_that_didnt_help }}
'
{% endif %}

Output YAML:
```yaml
"""